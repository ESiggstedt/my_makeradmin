version: "2"

services:
  db2:
    ports:
      - "3306:3306"
      
  api-gateway:
    volumes:
      - ./apigateway/lumen/routes:/var/www/html/routes
      - ./apigateway/lumen/app:/var/www/html/app
      - ./library/src/Makeradmin:/var/www/html/library
    ports:
      - "8010:80"
    environment:
      APP_DEBUG: "true"
      
 # current-member:
 #   environment:
 #     APP_DEBUG: "true"
 #   volumes:
 #     - ./member_view/src/main.py:/var/www/service/main.py
 #     - ./servicebase_python/service.py:/var/www/service/service.py
 #     - ./servicebase_python/migrate.py:/var/www/service/migrate.py

  membership:
    volumes:
      - ./membership/lumen/routes:/var/www/html/routes
      - ./membership/lumen/app:/var/www/html/app
      - ./library/src/Makeradmin:/var/www/html/library

  messages:
    volumes:
      - ./messages/lumen/routes:/var/www/html/routes
      - ./messages/lumen/app:/var/www/html/app
      - ./library/src/Makeradmin:/var/www/html/library

  email-dispatcher:
    volumes:
      - ./emaildispatcher/lumen/routes:/var/www/html/routes
      - ./emaildispatcher/lumen/app:/var/www/html/app
      - ./library/src/Makeradmin:/var/www/html/library

  multiaccesssync:
    volumes:
      - ./data/multiaccess-uploads:/var/www/html/storage/uploads
      - ./multiaccesssync/lumen/routes:/var/www/html/routes
      - ./multiaccesssync/lumen/app:/var/www/html/app
      - ./library/src/Makeradmin:/var/www/html/library

#  webshop:
#    ports:
#      - "8011:80"
#    volumes:
#      - ./webshop/src/ts:/var/www/service/ts
#      - ./webshop/src/scss:/var/www/service/scss
#      - ./webshop/src/templates:/var/www/service/templates
#      - ./webshop/src/frontend.py:/var/www/service/frontend.py
#      - ./webshop/src/app.py:/var/www/service/app.py
#      - ./webshop/src/member.py:/var/www/service/member.py
#      - ./webshop/src/backend.py:/var/www/service/backend.py
#      - ./webshop/src/webshop_entities.py:/var/www/service/webshop_entities.py
#      - ./servicebase_python/service.py:/var/www/service/service.py
#      - ./servicebase_python/migrate.py:/var/www/service/migrate.py
#    environment:
#      APP_DEBUG: "true"

  backend:
    volumes:
      - ./backend/src:/work/src
    environment:
      APP_DEBUG: "true"
      
  public:
    ports:
      - "8011:80"
    volumes:
      - ./public/ts:/work/ts
      - ./public/scss:/work/scss
      - ./public/templates:/work/templates
      - ./public/public.py:/work/public.py
    environment:
      APP_DEBUG: "true"
      
  admin:
    ports:
      - "8009:80"
    environment:
      APP_DEBUG: "true"
